<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Working with result sets &mdash; libmemcached 1.1.0 documentation</title>
    
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="libmemcached 1.1.0 documentation" href="index.html" />
    <link rel="next" title="Store, replace, add, or atomically add data to the server" href="memcached_set.html" />
    <link rel="prev" title="Retrieving data from the server" href="memcached_get.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="memcached_set.html" title="Store, replace, add, or atomically add data to the server"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="memcached_get.html" title="Retrieving data from the server"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">libmemcached 1.1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="working-with-result-sets">
<h1>Working with result sets<a class="headerlink" href="#working-with-result-sets" title="Permalink to this headline">¶</a></h1>
<div class="section" id="synopsis">
<h2>SYNOPSIS<a class="headerlink" href="#synopsis" title="Permalink to this headline">¶</a></h2>
<p>#include &lt;libmemcached/memcached_pool.h&gt;</p>
<dl class="type">
<dt id="c.memcached_result_st">
<code class="descname">memcached_result_st</code><a class="headerlink" href="#c.memcached_result_st" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c.memcached_result_create">
<a class="reference internal" href="#c.memcached_result_st" title="memcached_result_st">memcached_result_st</a> * <code class="descname">memcached_result_create</code><span class="sig-paren">(</span><a class="reference internal" href="memcached_create.html#c.memcached_st" title="memcached_st">memcached_st</a><em>&nbsp;*ptr</em>, <a class="reference internal" href="#c.memcached_result_st" title="memcached_result_st">memcached_result_st</a><em>&nbsp;*result</em><span class="sig-paren">)</span><a class="headerlink" href="#c.memcached_result_create" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c.memcached_result_free">
void <code class="descname">memcached_result_free</code><span class="sig-paren">(</span><a class="reference internal" href="#c.memcached_result_st" title="memcached_result_st">memcached_result_st</a><em>&nbsp;*result</em><span class="sig-paren">)</span><a class="headerlink" href="#c.memcached_result_free" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c.memcached_result_key_value">
const char * <code class="descname">memcached_result_key_value</code><span class="sig-paren">(</span><a class="reference internal" href="#c.memcached_result_st" title="memcached_result_st">memcached_result_st</a><em>&nbsp;*result</em><span class="sig-paren">)</span><a class="headerlink" href="#c.memcached_result_key_value" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c.memcached_result_key_length">
size_t <code class="descname">memcached_result_key_length</code><span class="sig-paren">(</span>const <a class="reference internal" href="#c.memcached_result_st" title="memcached_result_st">memcached_result_st</a><em>&nbsp;*result</em><span class="sig-paren">)</span><a class="headerlink" href="#c.memcached_result_key_length" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c.memcached_result_value">
const char *<code class="descname">memcached_result_value</code><span class="sig-paren">(</span><a class="reference internal" href="#c.memcached_result_st" title="memcached_result_st">memcached_result_st</a><em>&nbsp;*ptr</em><span class="sig-paren">)</span><a class="headerlink" href="#c.memcached_result_value" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c.memcached_result_take_value">
char *<code class="descname">memcached_result_take_value</code><span class="sig-paren">(</span><a class="reference internal" href="#c.memcached_result_st" title="memcached_result_st">memcached_result_st</a><em>&nbsp;*ptr</em><span class="sig-paren">)</span><a class="headerlink" href="#c.memcached_result_take_value" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c.memcached_result_length">
size_t <code class="descname">memcached_result_length</code><span class="sig-paren">(</span>const <a class="reference internal" href="#c.memcached_result_st" title="memcached_result_st">memcached_result_st</a><em>&nbsp;*ptr</em><span class="sig-paren">)</span><a class="headerlink" href="#c.memcached_result_length" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c.memcached_result_flags">
<a class="reference internal" href="types.html#c.uint32_t" title="uint32_t">uint32_t</a> <code class="descname">memcached_result_flags</code><span class="sig-paren">(</span>const <a class="reference internal" href="#c.memcached_result_st" title="memcached_result_st">memcached_result_st</a><em>&nbsp;*result</em><span class="sig-paren">)</span><a class="headerlink" href="#c.memcached_result_flags" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c.memcached_result_cas">
<a class="reference internal" href="types.html#c.uint64_t" title="uint64_t">uint64_t</a> <code class="descname">memcached_result_cas</code><span class="sig-paren">(</span>const <a class="reference internal" href="#c.memcached_result_st" title="memcached_result_st">memcached_result_st</a><em>&nbsp;*result</em><span class="sig-paren">)</span><a class="headerlink" href="#c.memcached_result_cas" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c.memcached_result_set_value">
<a class="reference internal" href="libmemcached/memcached_return_t.html#c.memcached_return_t" title="memcached_return_t">memcached_return_t</a> <code class="descname">memcached_result_set_value</code><span class="sig-paren">(</span><a class="reference internal" href="#c.memcached_result_st" title="memcached_result_st">memcached_result_st</a><em>&nbsp;*ptr</em>, const char<em>&nbsp;*value</em>, size_t<em>&nbsp;length</em><span class="sig-paren">)</span><a class="headerlink" href="#c.memcached_result_set_value" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c.memcached_result_set_flags">
void <code class="descname">memcached_result_set_flags</code><span class="sig-paren">(</span><a class="reference internal" href="#c.memcached_result_st" title="memcached_result_st">memcached_result_st</a><em>&nbsp;*ptr</em>, <a class="reference internal" href="types.html#c.uint32_t" title="uint32_t">uint32_t</a><em>&nbsp;flags</em><span class="sig-paren">)</span><a class="headerlink" href="#c.memcached_result_set_flags" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c.memcached_result_set_expiration">
void <code class="descname">memcached_result_set_expiration</code><span class="sig-paren">(</span><a class="reference internal" href="#c.memcached_result_st" title="memcached_result_st">memcached_result_st</a><em>&nbsp;*ptr</em>, time_t<span class="sig-paren">)</span><a class="headerlink" href="#c.memcached_result_set_expiration" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Compile and link with -lmemcachedutil -lmemcached</p>
</div>
<div class="section" id="description">
<h2>DESCRIPTION<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>libmemcached(3) can optionally return a <a class="reference internal" href="#c.memcached_result_st" title="memcached_result_st"><code class="xref c c-type docutils literal"><span class="pre">memcached_result_st</span></code></a> which
acts as a result object. The result objects have added benefits over the
character pointer returns, in that they are forward compatible with new
return items that future memcached servers may implement (the best current
example of this is the CAS return item). The structures can also be reused,
which will save on calls to malloc(3). It is suggested that you use result
objects over char * return functions.</p>
<p>The structure of <a class="reference internal" href="#c.memcached_result_st" title="memcached_result_st"><code class="xref c c-type docutils literal"><span class="pre">memcached_result_st</span></code></a> has been encapsulated, you should
not write code to directly access members of the structure.</p>
<p><a class="reference internal" href="#c.memcached_result_create" title="memcached_result_create"><code class="xref c c-func docutils literal"><span class="pre">memcached_result_create()</span></code></a> will either allocate memory for a
<a class="reference internal" href="#c.memcached_result_st" title="memcached_result_st"><code class="xref c c-type docutils literal"><span class="pre">memcached_result_st</span></code></a> or will initialize a structure passed to it.</p>
<p><a class="reference internal" href="#c.memcached_result_free" title="memcached_result_free"><code class="xref c c-func docutils literal"><span class="pre">memcached_result_free()</span></code></a> will deallocate any memory attached to the
structure. If the structure was also allocated, it will deallocate it.</p>
<p><a class="reference internal" href="#c.memcached_result_key_value" title="memcached_result_key_value"><code class="xref c c-func docutils literal"><span class="pre">memcached_result_key_value()</span></code></a> returns the key value associated with the
current result object.</p>
<p><a class="reference internal" href="#c.memcached_result_key_length" title="memcached_result_key_length"><code class="xref c c-func docutils literal"><span class="pre">memcached_result_key_length()</span></code></a> returns the key length associated with
the current result object.</p>
<p><a class="reference internal" href="#c.memcached_result_value" title="memcached_result_value"><code class="xref c c-func docutils literal"><span class="pre">memcached_result_value()</span></code></a> returns the result value associated with the
current result object.</p>
<p><a class="reference internal" href="#c.memcached_result_take_value" title="memcached_result_take_value"><code class="xref c c-func docutils literal"><span class="pre">memcached_result_take_value()</span></code></a> returns and hands over the result value
associated with the current result object. You must call free() to release this
value, unless you have made use of a custom allocator. Use of a custom
allocator requires that you create your own custom free() to release it.</p>
<p><a class="reference internal" href="#c.memcached_result_length" title="memcached_result_length"><code class="xref c c-func docutils literal"><span class="pre">memcached_result_length()</span></code></a> returns the result length associated with
the current result object.</p>
<p><a class="reference internal" href="#c.memcached_result_flags" title="memcached_result_flags"><code class="xref c c-func docutils literal"><span class="pre">memcached_result_flags()</span></code></a> returns the flags associated with the
current result object.</p>
<p><a class="reference internal" href="#c.memcached_result_cas" title="memcached_result_cas"><code class="xref c c-func docutils literal"><span class="pre">memcached_result_cas()</span></code></a> returns the cas associated with the
current result object. This value will only be available if the server
tests it.</p>
<p><a class="reference internal" href="#c.memcached_result_set_value" title="memcached_result_set_value"><code class="xref c c-func docutils literal"><span class="pre">memcached_result_set_value()</span></code></a> takes a byte array and a size and sets
the result to this value. This function is used for trigger responses.</p>
<p><a class="reference internal" href="#c.memcached_result_set_flags" title="memcached_result_set_flags"><code class="xref c c-func docutils literal"><span class="pre">memcached_result_set_flags()</span></code></a> takes a result structure and stores a new
value for the flags field.</p>
<p><a class="reference internal" href="#c.memcached_result_set_expiration" title="memcached_result_set_expiration"><code class="xref c c-func docutils literal"><span class="pre">memcached_result_set_expiration()</span></code></a> takes a result structure and stores
a new value for the expiration field (this is only used by read through
triggers).</p>
<p>You may wish to avoid using memcached_result_create(3) with a
stack based allocation. The most common issues related to ABI safety involve
heap allocated structures.</p>
</div>
<div class="section" id="return">
<h2>RETURN<a class="headerlink" href="#return" title="Permalink to this headline">¶</a></h2>
<p>Varies, see particular functions. All structures must have
<a class="reference internal" href="#c.memcached_result_free" title="memcached_result_free"><code class="xref c c-func docutils literal"><span class="pre">memcached_result_free()</span></code></a> called on them for cleanup purposes. Failure
to do this will result in leaked memory.</p>
</div>
<div class="section" id="home">
<h2>HOME<a class="headerlink" href="#home" title="Permalink to this headline">¶</a></h2>
<p>To find out more information please check:
<a class="reference external" href="http://libmemcached.org/">http://libmemcached.org/</a></p>
</div>
<div class="section" id="see-also">
<h2>SEE ALSO<a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h2>
<p><em class="manpage">memcached(1)</em> <em class="manpage">libmemcached(3)</em> <em class="manpage">memcached_strerror(3)</em></p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Working with result sets</a><ul>
<li><a class="reference internal" href="#synopsis">SYNOPSIS</a></li>
<li><a class="reference internal" href="#description">DESCRIPTION</a></li>
<li><a class="reference internal" href="#return">RETURN</a></li>
<li><a class="reference internal" href="#home">HOME</a></li>
<li><a class="reference internal" href="#see-also">SEE ALSO</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="memcached_get.html"
                        title="previous chapter">Retrieving data from the server</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="memcached_set.html"
                        title="next chapter">Store, replace, add, or atomically add data to the server</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="memcached_set.html" title="Store, replace, add, or atomically add data to the server"
             >next</a> |</li>
        <li class="right" >
          <a href="memcached_get.html" title="Retrieving data from the server"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">libmemcached 1.1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2011-2013, Brian Aker DataDifferential, http://datadifferential.com/.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6.
    </div>
  </body>
</html>